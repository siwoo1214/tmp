<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.jpaPrac1.mapper.LectureMapper">

    <!-- ResultMap: 카멜 케이스 <-> 언더스코어 매핑 -->
    <resultMap id="lectureResultMap" type="com.example.jpaPrac1.Dto.Lecture">
        <id property="lectureId" column="lecture_id" />
        <result property="uploaderId" column="uploader_id" />
        <result property="name" column="name" />
        <result property="outline" column="outline" />
        <result property="introduction" column="introduction" />
        <result property="price" column="price" />
        <result property="discountRate" column="discount_rate" />
        <result property="difficulty" column="difficulty" />
        <result property="bookmark" column="bookmark" />
        <result property="student" column="student" />
        <result property="uploadDate" column="upload_date" />
        <result property="passingCheck" column="passing_check" />
        <result property="failReason" column="fail_reason" />
    </resultMap>

    <!-- ✅ 전체 강의 조회 -->
    <select id="findAllLectures" resultMap="lectureResultMap">
        SELECT * FROM lecture
    </select>

    <!-- ✅ 강의 ID로 조회 -->
    <select id="findLectureById" parameterType="String" resultMap="lectureResultMap">
        SELECT * FROM lecture WHERE lecture_id = #{lectureId}
    </select>

    <!-- ✅ 강의 등록 -->
    <insert id="addLecture" parameterType="com.example.jpaPrac1.Dto.Lecture">
        INSERT INTO lecture (
        lecture_id, uploader_id, name, outline, introduction,
        price, discount_rate, difficulty, bookmark,
        student, upload_date, passing_check, fail_reason
        )
        VALUES (
        #{lectureId}, #{uploaderId}, #{name}, #{outline}, #{introduction},
        #{price}, #{discountRate}, #{difficulty}, #{bookmark},
        #{student}, #{uploadDate}, #{passingCheck}, #{failReason}
        )
    </insert>

</mapper>
